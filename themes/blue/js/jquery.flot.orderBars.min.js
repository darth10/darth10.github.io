/* Flot plugin to order bars side by side.

Released under the MIT license by Benjamin BUFFET, 20-Sep-2010.
This plugin is an alpha version.

To activate the plugin you must specify the parameter "order" for the specific series:

$.plot($("#placeholder"), [{ data: [ ... ], bars :{ order: null or integer }])

If 2 series have the same order param, they are ordered by the position in the array.

 */
!function(r){jQuery.plot.plugins.push({init:function(r){var n,t,a,e,o=1,i=!1;function u(r,n){for(var t=new Array,a=0;a<r.length;a++)t[0]=r[a].data[0][n],t[1]=r[a].data[r[a].data.length-1][n];return t}function s(r,n){var t=r.bars.order,a=n.bars.order;return t<a?-1:t>a?1:0}function l(r,n,t){for(var a=0,o=n;o<=t;o++)a+=r[o].bars.barWidth+2*e;return a}r.hooks.processDatapoints.push(function(r,h,f){var c,d=null;if(function(r){return null!=r.bars&&r.bars.show&&null!=r.bars.order}(h)&&(function(r){r.bars.horizontal&&(i=!0)}(h),function(r){var n=i?r.getPlaceholder().innerHeight():r.getPlaceholder().innerWidth(),t=u(r.getData(),i?1:0),a=t[1]-t[0];o=a/n}(r),function(r){n=function(r){for(var n=new Array,t=0;t<r.length;t++)null!=r[t].bars.order&&r[t].bars.show&&n.push(r[t]);return n.sort(s)}(r.getData()),t=n.length}(r),function(r){a=r.bars.lineWidth?r.bars.lineWidth:2,e=a*o}(h),t>=2)){var b=function(r){for(var t=0,a=0;a<n.length;++a)if(r==n[a]){t=a;break}return t+1}(h),g=(c=0,t%2!=0&&(c=n[Math.ceil(t/2)].bars.barWidth/2),c);d=function(r,n,t){for(var a=r.pointsize,e=r.points,o=0,u=i?1:0;u<e.length;u+=a)e[u]+=t,n.data[o][3]=e[u],o++;return e}(f,h,function(r){return r<=Math.ceil(t/2)}(b)?-1*l(n,b-1,Math.floor(t/2)-1)-g:l(n,Math.ceil(t/2),b-2)+g+2*e),f.points=d}return d})},options:{series:{bars:{order:null}}},name:"orderBars",version:"0.2"})}();
